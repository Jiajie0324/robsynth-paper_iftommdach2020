% !TEX encoding = UTF-8 Unicode
% !TeX spellcheck = de_DE

% Latex-Template für die VDI Mechatroniktagung 2015
% Lehrstuhl für Regelungssystemtechnik, TU Dortmund
% Letzte Änderung: 18.02.2014

\documentclass[fleqn,a4paper,10pt]{article}

% Packages
\usepackage{mathptmx} % Times Schriftart (auch in der Math-Umgebung)
\usepackage{ngerman,bibgerm}
\usepackage[utf8]{inputenc} % Deutsche Sonderzeichen/Umlaute gestatten
\usepackage[T1]{fontenc}
\usepackage[nooneline,bf,figurename=Bild,labelsep=quad,font=small]{caption} % Bildunterschrift linksbündig

\usepackage{multicol}

\usepackage{amsmath} % Zur Abbildung mathematischer Symbole und Formeln
\usepackage{amssymb} 
\newcommand{\bm}[1]{\mathbf{#1}}
\renewcommand{\Phi}[1]{\varPhi{#1}}
\newcommand{\transp}[0]{{\mathrm{T}}}
\usepackage[fleqn]{nccmath} % Ausrichtung von Gleichungen

\usepackage{graphicx}
\graphicspath{{./Bilder/}}
\usepackage{color}
\usepackage{geometry}

\usepackage{booktabs} % Erweiterte Tabellenumgebung
\usepackage{cite} % Erweitertes Zitiermöglichkeiten

\usepackage{titlesec} % Abstand vor und hinter Abschnittstiteln.

\usepackage{etoolbox} % Scriptsammlung. Z.B. horizontalen Abstand zwischen Literatureintrag und jeweiligem Label verändern.


% Seiteneinstellungen
\geometry{left=2.025cm, right=2cm, top=2.07cm, bottom=2.8cm} % Geringe Änderungen, um mit Word übereinzustimmen.
\parindent0cm
\columnsep5mm
\parskip 0pt   
\pagestyle{empty}                  % Kopf- und Fußzeile entfernen

% Abschnittsüberschriften
\captionsetup[table]{skip=-1.4ex} % Abstand zwischen Tabelle und Tabellenbeschriftung
\captionsetup[figure]{skip=5mm} % Abstand zwischen Bild und Bildunterschrift

% Paper-Titel
\titlespacing*{\section}{0pt}{6pt}{6pt}
\titlespacing*{\subsection}{0pt}{6pt}{6pt}
\titleformat{\section}{\normalfont\Large\bfseries}{\thesection\hskip 1cm}{0pt}{} % Abstand zwischen Titelnummer und Beschriftung.
\titleformat{\subsection}{\normalfont\large\bfseries}{\thesubsection\hskip 0.7cm}{0pt}{}

% Gleichungen
\setlength{\mathindent}{0.5cm} % Abstand von Gleichungen zum linken Rand.

% Tabelleneinstellungen
%\renewcommand{\arraystretch}{9.5} % Abstand zwischen Zeilen in einer Tabelle -> Steht in Vorlage, führt in Formel-Array zu sehr großem Abstand
\setlength{\tabcolsep}{6pt} % Abstand zwischen Spalten in einer Tabelle

% Umgebungsdefinitionen
\newenvironment{mytitle}{\fontsize{16pt}{1.0} \selectfont \bfseries}{\\} 
\newenvironment*{myabstract}{\begin{Large}\bfseries}{\end{Large}\\[6pt]}%

\renewenvironment{figure}
  {\par\vspace{6pt}\noindent\minipage{\linewidth}}
  {\endminipage\par\vspace{6pt}}


\renewenvironment{table}
  {\par\vspace{6pt}\noindent\minipage{\linewidth}\fontsize{8.5pt}{1.2} \selectfont}
  {\endminipage\par\vspace{6pt}}

\makeatletter

\g@addto@macro\normalsize{%        % Abstand vor und hinter Gleichungsumgebungen.
  \setlength\abovedisplayskip{6pt}
  \setlength\belowdisplayskip{6pt}
  \setlength\abovedisplayshortskip{6pt}
  \setlength\belowdisplayshortskip{6pt}
}

\makeatother

% Literaturverzeichnis
\patchcmd{\thebibliography}{\advance\leftmargin\labelsep}
  {\advance\leftmargin\labelsep \labelsep=0.4cm}{}{} % Horizontalen Abstand anpassen (etoolbox)
\patchcmd{\thebibliography}{\section*}{\section}{}{} % Abschnittsnummer hinzufügen

\let\OLDthebibliography\thebibliography % Vertikalen Abstand anpassen
\renewcommand\thebibliography[1]{
  \OLDthebibliography{#1}
  \setlength{\parskip}{0pt}
  \setlength{\itemsep}{2pt}
}


\begin{document}

\begin{mytitle} 
Maßsynthese für Parallele Roboter: Einheitliche Kinematik und Dynamik mit vollständigen kinematischen Zwangsbedingungen \\[6pt] % Falls Zeilenumbruch erforderlich, \\[6pt] anfügen.
Dimensional Synthesis of Parallel Robots: Unified Kinematics and Dynamics using Full Kinematic Constraints
\end{mytitle}

Moritz Schappler und Prof. Dr.-Ing. Tobias Ortmaier, Leibniz Universität Hannover, Institut für Mechatronische Systeme, Appelstraße 11a, 30167 Hannover, Deutschland. Korrespondenz: moritz.schappler@imes.uni-hannover.de.

\vspace{24pt} % Bitte nicht entfernen.

\begin{myabstract} Kurzfassung \end{myabstract}

%\begin{itemize}
%\item Große Fortschritte in Struktursynthese von PKM durch systematische Methoden wie Schraubentheorie \cite{KongGos2007} und Evolutionäre Morphologie \cite{Gogu2008}
%\item Neue PKM haben noch keine praktische Anwendung gefunden und bleiben Grundlagenforschung
%\item Methodik für effiziente und automatische Auslegung notwendig zur Auswahl der bestgeeignetsten Struktur
%\item Vorliegender Beitrag führt eine Methodik zur Maßsynthese beliebiger PKM ein
%\item Der Schwerpunkt liegt in der Ausnutzung struktureller Eigenschaften in der Optimierung
%\end{itemize}
Die Struktursynthese paralleler Roboter hat durch die systematische Nutzung der Schraubentheorie \cite{KongGos2007} und der evolutionären Morphologie \cite{Gogu2008} eine Vielzahl neuer Kinematiken hervorgebracht, für die Großteils noch keine praktische Anwendung gefunden wurde.
Um für gegebene Anforderungen das bestmögliche System auszuwählen, ist eine automatische Auslegung (Maßsynthese) notwendig, die für die Vielzahl verschiedener Kinematiken anwendbar ist.
Der Vorliegende Beitrag behandelt eine allgemeine Methodik für die Maßsynthese paralleler Kinematiken unter Ausnutzung struktureller Eigenschaften von Kinematik und Dynamik sowie der effizienten Strukturierung des Optimierungsproblems.

%Neuer Absatz: Detail zu Optimierung
%\begin{itemize}
%\item Die etablierte Partikel-Schwarm-Optimierung zur Lösung des hochdimensionalen Problems der Parameterfindung von Robotern wird hinsichtlich der Behandlung der Nebenbedingungen modifiziert.
%\item Stückweise definierte Fitness-Funktion mit Zielfunktion und Nebenbedingungen als Strafterm hierarchisch, um Rechenzeit zu sparen. Siehe Bild\,\ref{fig:uebersicht}.
%\item Energieverbrauch als Zielfunktion, da skalare Größe gut vergleichbar und andere Zielfunktionen wie Gesamtmasse und damit Dynamik dazu korrelierend
%\end{itemize}
Für das hochdimensionale Problem der Parameterfindung der Roboter wird die etablierte Partikel-Schwarm-Optimierung (PSO) eingesetzt, wie in Bild\,\ref{fig:uebersicht} skizziert.
Zur effizienten Berücksichtigung von Nebenbedingungen werden diese hierarchisch berechnet und normierte Strafterme $s_i$ direkt in der stückweise definierten Fitness-Funktion $f$ eingesetzt.
Als Zielfunktion $z$ wird der Energieverbrauch des Roboters über eine Referenz-Trajektorie $\bm{x}(t)$ gewählt.
Diese skalare Zielfunktion erlaubt einen direkten Vergleich unterschiedlicher Kinematiken und eine monetäre Bewertung.
Des Weiteren wird eine Korrelation mit anderen Zielfunktionen wie Gesamtmasse des Systems oder der gleichförmigkeit der Bewegung (Konditionszahl der Jacobi-Matrix) erwartet.

\begin{figure}
	\centering
    \input{./Bilder/Optimierung_Uebersicht.pdf_tex}
    \captionof{figure}{Überblick über die PSO-Optimierung und die Struktur der Fitness-Funktion mit hierarchischen Nebenbedingungen.}
    \label{fig:uebersicht}
\end{figure}

%Neuer Absatz: Kinematik und Dynamik
%\begin{itemize}
%\item Generische Ansätze für inverse Dynamik \cite{DoThanhKotHeiOrt2009b,AbdellatifHei2009} bisher explizit nur für klassische PKM definiert, deren Plattform mit Kugelgelenken verbunden ist
%\item Durch Nutzung von vollständigen Zwangsbedingungen (Position und Orientierung) \cite{Gogu2008,SchapplerTapOrt2019c} einheitlicher Ansatz zum Lösen der inversen Kinematik und der inversen Dynamik möglich.
%\item Durch die Reduzierung des Rechenaufwands ist die Auswertung vieler Parameterkombinationen möglich
%\end{itemize}

Zur Bestimmung von Nebenbedingungen wie der Einhaltung der Gelenkwinkelgrenzen ist eine Berechnung der passiven Gelenke und der Plattform-Koppelgelenke notwendig.
Eine Elimination der passiven Gelenke ist nicht für alle Strukturen möglich.
Zusätzlich wird ein effizienter und allgemeingültiger Ansatz für die Dynamik benötigt.
Der in Bild\,\ref{fig:details_kindyn} dargestellte Ansatz erfüllt diese Anforderungen.

\begin{figure}
    \centering
    \input{./Bilder/Details_Kin_Dyn.pdf_tex}
    \captionof{figure}{Details für Kinematik und Dynamik Ansatz.}
    \label{fig:details_kindyn}
\end{figure}

Zunächst werden die Gelenkgrößen des Roboters $\bm{q},\dot{\bm{q}},\ddot{\bm{q}}$ des Roboters mittels der vollständigen \emph{inversen Kinematik} \cite{SchapplerTapOrt2019c} berechnet.
Die dafür notwendigen vollständigen kinematischen Zwangsbedingungen $\bm{\Phi}$ enthalten für jede Beinkette sowohl den Positions-, als auch den in Euler-Winkeln ausgedrückten Orientierungsfehler \cite{SchapplerTapOrt2019c}.
Durch Bildung der Gradienten ($\bm{\Phi}_\bm{q}$ und $\bm{\Phi}_\bm{x}$) können mit der vollständigen Jacobi-Matrix $\tilde{\bm{J}}$ neben den aktiven Gelenkkoordinaten $\bm{q}_\mathrm{a}$ auch passive Gelenke und Schnittgelenke der Plattform berechnet werden.

Für die Bestimmung des Energieverbrauchs für eine Referenztrajektorie wird ein allgemeingültiger Ansatz für die \emph{inverse Dynamik} beliebiger paralleler Roboter benötigt.
Das zu diesem Zweck in \cite{AbdellatifHei2009,DoThanhKotHeiOrt2009b} vorgestellte Prinzip der Energieäquivalenz wird dafür erweitert:
Zunächst erfolgt die Zerlegung des parallelen Roboters in einzelne Subsysteme (Beinketten und Plattform), in deren jeweiligen Minimalkoordinaten (Gelenk- und Plattformkoordinaten) die Dynamik einzeln nach dem \textsc{Lagrange}schen Formalismus aufgestellt wird (Massenmatrix $\tilde{\bm{M}}$, Coriolis- und Fliehkraftterme $\tilde{\bm{c}}$, Gravitationsterme $\tilde{\bm{g}}$).
Anschließend erfolgt die Projektion der Dynamik in die Minimal- und Plattformkoordinaten $\bm{x}$ des Roboters durch Anwendung des \textsc{D'Alembert}schen Prinzips \cite{DoThanhKotHeiOrt2009b,AbdellatifHei2009}, woraus die Dynamik-Terme $\bm{M},\bm{c},\bm{g}$ bezogen auf die Plattform resultieren (siehe mittlerer Block in Bild\,\ref{fig:details_kindyn}).
Die Jacobi-Matrix $\tilde{\bm{J}}$ aus der inversen Kinematik kann direkt ohne Neuberechnung für die Projektionsmatrix der Dynamik $\tilde{\bm{R}}$ verwendet werden.
Durch die Verwendung rotatorischer Zwangsbedingungen zusätzlich zu den üblicherweise verwendeten translatorischen Zwangsbedingungen kann die implizite Annahme aus \cite{AbdellatifHei2009} aufgehoben werden, dass die Beinketten räumlicher Parallelkinematiken in Kugelgelenken enden müssen.

Für die Berechnung der \emph{Energie als Zielfunktion} (rechter Block in Bild\,\ref{fig:details_kindyn}) erfolgt eine Projektion der Dynamik in die Antriebskräfte $\bm{\tau}_\mathrm{a}$. 
Für die dafür notwendige Jacobi-Matrix $\bm{J}$ müssen lediglich die entsprechenden Spalten aus $\tilde{\bm{J}}$ gewählt werden.
Es wird angenommen, dass alle Antriebe ihre Leistung in einem elektrischen Zwischenkreis austauschen können (resultierend zu $P_\mathrm{Kreis}$).
Für die aus dem Netz aufzunehmende Leistung $P_\mathrm{Netz}$ wird die Möglichkeit einer  Rückspeisung ausgeschlossen.
Aus der aufintegrierten Energie $E_\mathrm{Netz}$ wird durch eine Normierung (mittels arctan-Funktion) der Zielfunktionswert $z$ gebildet.

Erste Ergebnisse der Methodik sind beispielhaft in Bild\,\ref{fig:ergebnisse} dargestellt.
Die der Optimierung zu Grunde liegende Aufgabe ist das Abfahren der Eckpunkte eines Würfels mit Kantenlänge $30\,\textrm{mm}$ und Kippwinkeln bis zu $10^\circ$ mit einem Beschleunigungs-Trapez-Profil.

\begin{figure}
    \centering
    \input{./Bilder/Optimierung_Ergebnisse.pdf_tex}
    \captionof{figure}{Ergebnisse der Maßsynthese für vier Beispiel-PKM mit 6 Plattform-Freiheitsgraden.}
    \label{fig:ergebnisse}
\end{figure}

Durch die Vorgabe von maximaler Geschwindigkeit von $1\,\textrm{m/s}$ bzw. $60^\circ\textrm{/s}$ und Beschleunigung von $3\,\textrm{m/s}^2$ bzw. $180^\circ\textrm{/s}^2$ und einer Zusatzmasse von $3\,\textrm{kg}$ wird versucht, einen ausreichend großen Einfluss der Dynamik auf das Optimierungsergebnis zu erzielen.
Der PSO-Algorithmus wurde mit 30 Generationen mit 70 Individuen parametriert, was angesichts der 16 bis 20 Optimierungsparameter noch wenig erscheint und eine sinnvolle Wahl der Parametergrenzen und -abhängigkeiten notwendig macht.
Optimierungsparameter sind bspw. die DH-Parameter der seriellen Beinketten, Durchmesser von Gestell und Plattform, Morphologieparameter wie Koppelpunktpaarabstand und Neigung des gestellnahen Gelenks. 
Als weitere Arbeiten sind Plausibilisierungen hinsichtlich Straftermen für Selbstkollisionen und die Reduktion der Optimierungsparameter geplant.

Die Autoren bedanken sich für die Unterstützung durch die Deutsche Forschungsgemeinschaft (DFG, OR 196/33-1).

\vspace{18pt} 

\begingroup\Large{\textbf{Literatur}}\endgroup
\begingroup % Bitte nicht entfernen.
\renewcommand{\section}[1]{} % Bitte nicht entfernen.
\begin{thebibliography}{99}

\bibitem{AbdellatifHei2009}
Abdellatif, H. and Heimann, B.:
\newblock \textit{Computational efficient inverse dynamics of 6-DOF fully parallel manipulators by using the Lagrangian formalism}.
\newblock Mechanism and Machine Theory 44. (2009), 1, S. 192-207.

\bibitem{Gogu2008}
Gogu, G.:
\newblock \textit{Structural Synthesis of Parallel Robots, Part 1: Methodology}.
\newblock Springer Netherlands, 2008.

\bibitem{KongGos2007}
Kong, X.; Gosselin, C.M.:
\newblock \textit{Type synthesis of parallel mechanisms}.
\newblock Springer-Verlag Berlin Heidelberg, 2007.

\bibitem{DoThanhKotHeiOrt2009b}
Do Thanh, T.; Kotlarski, J.; Heimann, B.; Ortmaier, T.:
\newblock \textit{On the inverse dynamics problem of general parallel robots}.
\newblock In: IEEE International Conference on Mechatronics 2009. 14.-17. April 2009 Malaga/Spanien. IEEE 2009. ISBN 978-1-4244-4194-5. S. 1-6. 

\bibitem{SchapplerTapOrt2019c}
Schappler, M. and Tappe, S. and Ortmaier, T.:
\newblock \textit{Modeling Parallel Robot Kinematics for 3T2R and 3T3R Tasks Using Reciprocal Sets of Euler Angles}.
\newblock MDPI Robotics 8, 68 (2019).

\end{thebibliography}
\endgroup % Bitte nicht entfernen.

\clearpage  % Verhindert automatischen Umbruch auf der letzten Seite. Bei Bedarf entfernen.

\end{document}